<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title th:text="'ê²Œì‹œê¸€ | ' + ${post.title}">ê²Œì‹œê¸€ ìƒì„¸</title>
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/post.css">
  <script src="/js/post-detail.js" defer></script>
  <style>
    .product-card {
      border: 1px solid #ddd;
      background-color: #f9f7f3;
      padding: 1rem;
      border-radius: 10px;
      margin-top: 1.5rem;
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .product-card-icon {
      font-size: 1.5rem;
      color: #a34c1d;
    }

    .product-card-text {
      font-weight: bold;
      color: #333;
      font-size: 1rem;
    }

    .product-card:hover {
      background-color: #f2ece4;
    }
  </style>
</head>
<body>

  <div th:replace="~{fragments/header :: common-header}"></div>

  <main class="main">
    <article class="post">
      <h1 class="post-title" th:text="${post.title}">ì œëª©</h1>
      <div class="post-meta">
        <span th:text="${post.author.name}">ì‘ì„±ì</span> Â·
        <span th:text="${#temporals.format(post.createdAt, 'yyyy-MM-dd')}">ì‘ì„±ì¼</span>
      </div>

      <!-- ë³¸ë¬¸ ë‚´ìš© -->
      <div class="post-content" th:text="${post.content}">ë³¸ë¬¸ ë‚´ìš©</div>

      <!-- ì´ë¯¸ì§€ ì¸ë„¤ì¼ í‘œì‹œ -->
      <div class="post-images" th:if="${post.images != null}">
        <img th:each="img : ${post.images}"
             th:src="@{'/img/' + ${img}}"
             alt="ê²Œì‹œê¸€ ì´ë¯¸ì§€"
             class="post-image"/>
      </div>

      <!-- ìƒí’ˆ ë§í¬ ì¹´ë“œ -->
      <div class="post-link" th:if="${post.url != null}">
        <a th:href="${post.url}" target="_blank" class="product-card">
          <span class="product-card-icon">ğŸ›’</span>
          <span class="product-card-text">ìƒí’ˆ ë³´ëŸ¬ê°€ê¸°</span>
        </a>
      </div>

      <!-- ì¢‹ì•„ìš” ë²„íŠ¼ -->
      <button class="like-btn" type="button">â™¥ ì¢‹ì•„ìš”</button>

      <!-- ì‚­ì œ ë²„íŠ¼ -->
      <form th:action="@{'/post/' + ${post.id} + '/delete'}" method="post" style="margin-top: 1rem;">
        <button type="submit" class="delete-btn">ì‚­ì œí•˜ê¸°</button>
      </form>
    </article>

    <section class="comments">
      <h2>ëŒ“ê¸€</h2>

      <ul class="comment-list">
        <li th:each="comment : ${comments}">
          <p><strong th:text="${comment.author}">ì‘ì„±ì</strong></p>
          <p th:text="${comment.content}">ëŒ“ê¸€ ë‚´ìš©</p>
          <small th:text="${#temporals.format(comment.createdAt, 'yyyy-MM-dd HH:mm')}">ì‘ì„±ì¼</small>
        </li>
      </ul>

      <form th:action="@{'/post/' + ${post.id} + '/comment'}" method="post" class="comment-form">
        <textarea name="content" rows="3" placeholder="ëŒ“ê¸€ì„ ì…ë ¥í•˜ì„¸ìš”" required></textarea>
        <button type="submit">ëŒ“ê¸€ ì‘ì„±</button>
      </form>
    </section>
  </main>

  <div th:replace="~{fragments/footer :: common-footer}"></div>
</body>
</html>
